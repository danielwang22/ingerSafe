plugins {
    id "com.android.application"
    // START: FlutterFire Configuration
    id 'com.google.gms.google-services'
    // END: FlutterFire Configuration
    id "kotlin-android"
    // The Flutter Gradle Plugin must be applied after the Android and Kotlin Gradle plugins.
    id "dev.flutter.flutter-gradle-plugin"
}

android {
    namespace = "com.afternoonteacoders.ingresafe"
    compileSdk = 35
    ndkVersion = "26.1.10909125"

    compileOptions {
        sourceCompatibility = JavaVersion.VERSION_11
        targetCompatibility = JavaVersion.VERSION_11
    }

    kotlinOptions {
        jvmTarget = '11'
    }

    defaultConfig {
        applicationId = "com.afternoonteacoders.ingresafe"
        minSdk = 24
        targetSdk = 35
        versionCode = 7
        versionName = "0.15"
    }

    signingConfigs {
        release {
            storeFile file("keystore/ingresafe-release-key.jks")
            storePassword "afternoonteacoders"
            keyAlias "ingresafe"
            keyPassword "afternoonteacoders"
        }
    }

    buildTypes {
        release {
            debuggable false
//            signingConfig signingConfigs.debug
            signingConfig signingConfigs.release // ‚Üê This line changed
            minifyEnabled true
            shrinkResources true
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'

            // üëá Add this to generate native debug symbols
//            ndk {
//                debugSymbolLevel = 'FULL'
//            }
        }
        debug {
            debuggable true
            buildConfigField "Boolean", "ENABLE_R8", "true"
        }
    }

    lint {
        disable 'InvalidPackage'
        checkReleaseBuilds false
    }
}

flutter {
    source = "../.."
}

dependencies {
    // üëá This is required for Chinese text recognition to work
    implementation 'com.google.mlkit:text-recognition-chinese:16.0.0'
    implementation 'com.android.support:support-v4:28.0.0'
    implementation 'com.google.firebase:firebase-core:21.1.0' // Add Firebase dependency (if not already added)
    implementation 'com.google.firebase:firebase-firestore:24.5.0'  // Firestore SDK dependency
    // Add other Firebase dependencies here
}
